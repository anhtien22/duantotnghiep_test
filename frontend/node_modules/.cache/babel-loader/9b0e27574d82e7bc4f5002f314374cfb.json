{"ast":null,"code":"var _jsxFileName = \"D:\\\\D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p\\\\duantotnghiep_test\\\\frontend\\\\src\\\\context\\\\brand\\\\BrandState.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport BrandContext from './brandContext';\nimport axios from 'axios';\n\n// Function for cleaning null, undefined and empty strings values in objects\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction clean(obj) {\n  for (var propName in obj) {\n    if (obj[propName] === null || obj[propName] === undefined || obj[propName] === '') {\n      delete obj[propName];\n    }\n  }\n  return obj;\n}\n\n// ------------------------------------------\n// Category State\n// ------------------------------------------\nconst BrandState = props => {\n  _s();\n  const [brands, setBrands] = useState([]);\n  const [brandsError, setBrandsError] = useState(null);\n  const [brandsLoading, setBrandsLoading] = useState(false);\n  const [brandsMessage, setBrandsMessage] = useState(null);\n  useEffect(() => {\n    setTimeout(() => {\n      setBrandsError(null);\n      setBrandsMessage(null);\n    }, 3000);\n  }, [brandsError, brandsMessage]);\n\n  // Error Handler function\n  const errorHandler = (err, info) => {\n    if (err.response) {\n      setBrandsError({\n        variant: 'danger',\n        message: `${info}, ${err.response.data.error}`\n      });\n    } else if (err.request) {\n      setBrandsError({\n        variant: 'danger',\n        message: `${info},  Không có phản hồi từ máy chủ!`\n      });\n    } else {\n      setBrandsError({\n        variant: 'danger',\n        message: err.message\n      });\n    }\n    setBrandsLoading(false);\n  };\n\n  // Add new category\n  const addBrand = async local => {\n    const brandBody = clean({\n      local\n    });\n    try {\n      const userToken = JSON.parse(localStorage.getItem('userToken'));\n      const headers = {\n        Authorization: `Bearer ${userToken && userToken}`\n      };\n      setBrandsLoading(true);\n      await axios.post('api/brand/add', brandBody, {\n        headers\n      });\n      setBrands([...brands, brandBody]);\n      setBrandsMessage({\n        variant: 'success',\n        message: 'Thương hiệu được thêm thành công!'\n      });\n      window.location.reload();\n      setBrandsLoading(false);\n      setBrandsError(null);\n    } catch (err) {\n      errorHandler(err);\n    }\n  };\n\n  // get all categories\n  const getBrands = async (limit, skip, keyword) => {\n    try {\n      setBrandsLoading(true);\n      const {\n        data\n      } = await axios.get('api/brand/getAll', {\n        params: {\n          limit,\n          skip,\n          keyword\n        }\n      });\n      setBrands(data.brands);\n      setBrandsLoading(false);\n      setBrandsError(null);\n    } catch (err) {\n      errorHandler(err);\n    }\n  };\n\n  // Delete Category\n  const deleteBrand = async id => {\n    try {\n      setBrandsLoading(true);\n      const userToken = JSON.parse(localStorage.getItem('userToken'));\n      const headers = {\n        Authorization: `Bearer ${userToken && userToken}`,\n        'Content-Type': 'multipart/form-data'\n      };\n      const {\n        data\n      } = await axios.delete(`/api/brand/${id}`, {\n        headers\n      });\n      setBrandsLoading(false);\n      setBrandsError(null);\n      setBrandsMessage({\n        variant: 'success',\n        message: 'Xóa thành công!'\n      });\n      window.location.reload();\n      return data.categories;\n    } catch (err) {\n      errorHandler(err, 'Không tìm thấy sản phẩm');\n    }\n  };\n\n  // get one category\n  const getOneBrand = async id => {\n    try {\n      const {\n        data\n      } = await axios.get(`/api/brand/${id}`);\n      return data.categories;\n    } catch (err) {\n      errorHandler(err);\n    }\n  };\n  const updateBrand = async (id, local) => {\n    try {\n      const userToken = JSON.parse(localStorage.getItem('userToken'));\n      const headers = {\n        Authorization: `Bearer ${userToken && userToken}`\n      };\n      setBrandsLoading(true);\n      await axios.patch(`api/brand/${id}`, {\n        local\n      }, {\n        headers\n      });\n      getBrands();\n      setBrandsMessage({\n        variant: 'info',\n        message: 'Thương hiệu được cập nhật'\n      });\n      setBrandsLoading(false);\n      setBrandsError(null);\n    } catch (err) {\n      errorHandler(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(BrandContext.Provider, {\n    value: {\n      brands,\n      brandsError,\n      brandsLoading,\n      brandsMessage,\n      getBrands,\n      addBrand,\n      deleteBrand,\n      getOneBrand,\n      updateBrand\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s(BrandState, \"jPlF96wZF0q0d1mEF1CcxM9H8wo=\");\n_c = BrandState;\nexport default BrandState;\nvar _c;\n$RefreshReg$(_c, \"BrandState\");","map":{"version":3,"names":["React","useEffect","useState","BrandContext","axios","clean","obj","propName","undefined","BrandState","props","brands","setBrands","brandsError","setBrandsError","brandsLoading","setBrandsLoading","brandsMessage","setBrandsMessage","setTimeout","errorHandler","err","info","response","variant","message","data","error","request","addBrand","local","brandBody","userToken","JSON","parse","localStorage","getItem","headers","Authorization","post","window","location","reload","getBrands","limit","skip","keyword","get","params","deleteBrand","id","delete","categories","getOneBrand","updateBrand","patch","children"],"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/context/brand/BrandState.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport BrandContext from './brandContext'\r\nimport axios from 'axios'\r\n\r\n\r\n// Function for cleaning null, undefined and empty strings values in objects\r\nfunction clean(obj) {\r\n  for (var propName in obj) {\r\n    if (\r\n      obj[propName] === null ||\r\n      obj[propName] === undefined ||\r\n      obj[propName] === ''\r\n    ) {\r\n      delete obj[propName]\r\n    }\r\n  }\r\n  return obj\r\n}\r\n\r\n// ------------------------------------------\r\n// Category State\r\n// ------------------------------------------\r\nconst BrandState = props => {\r\n  const [brands, setBrands] = useState([])\r\n  const [brandsError, setBrandsError] = useState(null)\r\n  const [brandsLoading, setBrandsLoading] = useState(false)\r\n  const [brandsMessage, setBrandsMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n        setBrandsError(null)\r\n        setBrandsMessage(null)\r\n    }, 3000)\r\n  }, [brandsError, brandsMessage])\r\n\r\n  // Error Handler function\r\n  const errorHandler = (err, info) => {\r\n    if (err.response) {\r\n        setBrandsError({\r\n        variant: 'danger',\r\n        message: `${info}, ${err.response.data.error}`,\r\n      })\r\n    } else if (err.request) {\r\n        setBrandsError({\r\n        variant: 'danger',\r\n        message: `${info},  Không có phản hồi từ máy chủ!`,\r\n      })\r\n    } else {\r\n        setBrandsError({ variant: 'danger', message: err.message })\r\n    }\r\n    setBrandsLoading(false)\r\n  }\r\n\r\n  // Add new category\r\n  const addBrand = async local => {\r\n    const brandBody = clean({ local })\r\n    try {\r\n      const userToken = JSON.parse(localStorage.getItem('userToken'))\r\n      const headers = {\r\n        Authorization: `Bearer ${userToken && userToken}`,\r\n      }\r\n      setBrandsLoading(true)\r\n      await axios.post('api/brand/add', brandBody, { headers })\r\n      setBrands([...brands, brandBody])\r\n      setBrandsMessage({\r\n        variant: 'success',\r\n        message: 'Thương hiệu được thêm thành công!',\r\n      })\r\n      window.location.reload();\r\n      setBrandsLoading(false)\r\n      setBrandsError(null)\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // get all categories\r\n  const getBrands = async (limit, skip, keyword) => {\r\n    try {\r\n        setBrandsLoading(true)\r\n      const { data } = await axios.get('api/brand/getAll', {\r\n        params: { limit, skip, keyword},\r\n      })\r\n      setBrands(data.brands)\r\n      setBrandsLoading(false)\r\n      setBrandsError(null)\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n// Delete Category\r\nconst deleteBrand = async id  => {\r\n  try {\r\n    setBrandsLoading(true)\r\n    const userToken = JSON.parse(localStorage.getItem('userToken'))\r\n    const headers = {\r\n      Authorization: `Bearer ${userToken && userToken}`,\r\n      'Content-Type': 'multipart/form-data',\r\n    }\r\n    const { data } = await axios.delete(`/api/brand/${id}`, { headers })\r\n    setBrandsLoading(false)\r\n    setBrandsError(null)\r\n    setBrandsMessage({\r\n      variant: 'success',\r\n      message: 'Xóa thành công!',\r\n    })\r\n    window.location.reload();\r\n    return data.categories\r\n  } catch (err) {\r\n    errorHandler(err, 'Không tìm thấy sản phẩm')\r\n  }\r\n}\r\n\r\n  // get one category\r\n  const getOneBrand = async id => {\r\n    try {\r\n      const { data } = await axios.get(`/api/brand/${id}`)\r\n      return data.categories\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  const updateBrand = async (id, local) => {\r\n    try {\r\n      const userToken = JSON.parse(localStorage.getItem('userToken'))\r\n      const headers = {\r\n        Authorization: `Bearer ${userToken && userToken}`,\r\n      }\r\n      setBrandsLoading(true)\r\n      await axios.patch(`api/brand/${id}`, { local }, { headers })\r\n      getBrands()\r\n      setBrandsMessage({\r\n        variant: 'info',\r\n        message: 'Thương hiệu được cập nhật',\r\n      })\r\n      setBrandsLoading(false)\r\n      setBrandsError(null)\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <BrandContext.Provider\r\n      value={{\r\n        brands,\r\n        brandsError,\r\n        brandsLoading,\r\n        brandsMessage,\r\n        getBrands,\r\n        addBrand,\r\n        deleteBrand,\r\n        getOneBrand,\r\n        updateBrand,\r\n      }}>\r\n      {props.children}\r\n    </BrandContext.Provider>\r\n  )\r\n}\r\n\r\nexport default BrandState\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}