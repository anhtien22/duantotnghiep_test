{"ast":null,"code":"import _objectSpread from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Rating}from\"@mui/material\";import React,{useContext,useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useCart}from\"react-use-cart\";import CategoryContext from\"../context/category/categoryContext\";import productContext from\"../context/product/productContext\";import usePagination from\"../helpers/Pagination\";import{Pagination}from\"@material-ui/lab\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FeaturedProducts=function FeaturedProducts(){var pContext=useContext(productContext);var getProducts=pContext.getProducts,products=pContext.products;console.log(products);// for category context\nvar cContext=useContext(CategoryContext);var getCategories=cContext.getCategories;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),skip=_useState2[0],setSkip=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),keyWord=_useState4[0],setKeyWord=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var _useCart=useCart(),addItem=_useCart.addItem;var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),quantity=_useState10[0],setQuantity=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),page=_useState12[0],setPage=_useState12[1];var PER_PAGE=3;var count=Math.ceil(products.length/PER_PAGE);var data=usePagination(products,PER_PAGE);var handleChange=function handleChange(e,p){setPage(p);data.jump(p);};useEffect(function(){var populateProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setTotalResults;_context.next=3;return getProducts(skip,keyWord,category);case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 5:case\"end\":return _context.stop();}}},_callee);}));return function populateProducts(){return _ref.apply(this,arguments);};}();populateProducts();getCategories();// eslint-disable-next-line\n},[skip,category]);var formatter=new Intl.NumberFormat(\"it-IT\",{style:\"currency\",currency:\"VND\"});return/*#__PURE__*/_jsx(\"div\",{className:\"site-section block-3 site-blocks-2 bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 site-section-heading text-center pt-4\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"S\\u1EA3n ph\\u1EA9m m\\u1EDBi\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-5\",children:[data.currentData().map(function(product){return/*#__PURE__*/_jsx(_Fragment,{children:product.ratings>=3?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 col-lg-4 mb-4\",\"data-aos\":\"fade-up\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-4 text-center border\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"block-4-image\",children:/*#__PURE__*/_jsx(Link,{to:\"/shopSingle/\".concat(product._id),children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:\"placeholder\",className:\"img-fluid\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"block-4-text p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{className:\"text-black font-weight-bold\",to:\"/shopSingle/\".concat(product._id),children:product.name})}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-secondary\",children:product.category.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-black font-weight-bold\",children:formatter.format(product.price)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-black font-weight-bold\",children:/*#__PURE__*/_jsx(Rating,{name:\"half-rating-read\",defaultValue:product.ratings,precision:0.5,readOnly:true})}),/*#__PURE__*/_jsx(\"p\",{className:\"buy-now btn btn-sm btn-outline-dark\",onClick:function onClick(){var item=_objectSpread(_objectSpread({},product),{},{id:product._id});addItem(item,quantity);},children:\"add cart\"})]})]})},product._id)}):\"\"});}),/*#__PURE__*/_jsx(Pagination,{count:count,size:\"large\",page:page,variant:\"outlined\",shape:\"rounded\",onChange:handleChange})]})]})})});};export default FeaturedProducts;","map":{"version":3,"names":["Rating","React","useContext","useEffect","useState","Link","useCart","CategoryContext","productContext","usePagination","Pagination","FeaturedProducts","pContext","getProducts","products","console","log","cContext","getCategories","skip","setSkip","keyWord","setKeyWord","category","setCategory","totalResults","setTotalResults","addItem","quantity","setQuantity","page","setPage","PER_PAGE","count","Math","ceil","length","data","handleChange","e","p","jump","populateProducts","formatter","Intl","NumberFormat","style","currency","currentData","map","product","ratings","_id","image","name","title","format","price","item","id"],"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/components/FeaturedProducts.js"],"sourcesContent":["import { Rating } from \"@mui/material\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useCart } from \"react-use-cart\";\r\nimport CategoryContext from \"../context/category/categoryContext\";\r\nimport productContext from \"../context/product/productContext\";\r\nimport usePagination from \"../helpers/Pagination\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\n\r\nconst FeaturedProducts = () => {\r\n  const pContext = useContext(productContext);\r\n  const { getProducts, products } = pContext;\r\n  console.log(products);\r\n  // for category context\r\n  const cContext = useContext(CategoryContext);\r\n  const { getCategories } = cContext;\r\n\r\n  const [skip, setSkip] = useState(0);\r\n  const [keyWord, setKeyWord] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [totalResults, setTotalResults] = useState(0);\r\n  const { addItem } = useCart();\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n\r\n  const [page, setPage] = useState(1);\r\n  const PER_PAGE = 3;\r\n  const count = Math.ceil(products.length / PER_PAGE);\r\n  const data = usePagination(products, PER_PAGE);\r\n\r\n  const handleChange = (e, p) => {\r\n    setPage(p);\r\n    data.jump(p);\r\n  };\r\n  useEffect(() => {\r\n    const populateProducts = async () => {\r\n      setTotalResults(await getProducts(skip, keyWord, category));\r\n    };\r\n    populateProducts();\r\n    getCategories();\r\n    // eslint-disable-next-line\r\n  }, [skip, category]);\r\n\r\n  const formatter = new Intl.NumberFormat(\"it-IT\", {\r\n    style: \"currency\",\r\n    currency: \"VND\",\r\n  });\r\n  return (\r\n    <div className=\"site-section block-3 site-blocks-2 bg-light\">\r\n      <div className=\"container\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-md-7 site-section-heading text-center pt-4\">\r\n            <h2>Sản phẩm mới</h2>\r\n          </div>\r\n          <div className=\"row mb-5\">\r\n            {\r\n              data.currentData().map((product) => (\r\n                <>\r\n                  { product.ratings >= 3 ? (\r\n                    <>\r\n                      <div\r\n                        className=\"col-sm-6 col-lg-4 mb-4\"\r\n                        data-aos=\"fade-up\"\r\n                        key={ product._id }\r\n                      >\r\n                        <div className=\"block-4 text-center border\">\r\n                          <figure className=\"block-4-image\">\r\n                            <Link to={ `/shopSingle/${product._id}` }>\r\n                              <img\r\n                                src={ product.image }\r\n                                alt=\"placeholder\"\r\n                                className=\"img-fluid\"\r\n                              />\r\n                            </Link>\r\n                          </figure>\r\n                          <div className=\"block-4-text p-4\">\r\n                            <h3>\r\n                              <Link className=\"text-black font-weight-bold\" to={ `/shopSingle/${product._id}` }>\r\n                                { product.name }\r\n                              </Link>\r\n                            </h3>\r\n                            <p className=\"mb-0 text-secondary\">\r\n                              { product.category.title }\r\n                            </p>\r\n                            <p className=\"text-black font-weight-bold\">\r\n                              { formatter.format(product.price) }\r\n                            </p>\r\n                            <p className=\"text-black font-weight-bold\">\r\n                              <Rating name=\"half-rating-read\" defaultValue={ product.ratings } precision={ 0.5 } readOnly />\r\n                            </p>\r\n                            <p\r\n                              className=\"buy-now btn btn-sm btn-outline-dark\"\r\n                              onClick={ () => {\r\n                                let item = {\r\n                                  ...product,\r\n                                  id: product._id,\r\n                                };\r\n                                addItem(item, quantity);\r\n                              } }\r\n                            >\r\n                              {/* <Link\r\n                        to=\"/Cart\"\r\n                        className=\"buy-now btn btn-sm btn-primary\"\r\n                        onClick={() => {\r\n                          let item = {\r\n                            ...product,\r\n                            id: product._id,\r\n                          };\r\n                          addItem(item, quantity);\r\n                        }}\r\n                      >\r\n                        Add To Cart\r\n                      </Link> */}\r\n                              add cart\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  ) : \"\" }\r\n                </>\r\n              )\r\n              ) }\r\n            <Pagination\r\n              count={ count }\r\n              size=\"large\"\r\n              page={ page }\r\n              variant=\"outlined\"\r\n              shape=\"rounded\"\r\n              onChange={ handleChange }\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeaturedProducts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}