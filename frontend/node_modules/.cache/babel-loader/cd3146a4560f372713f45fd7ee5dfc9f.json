{"ast":null,"code":"var _jsxFileName = \"D:\\\\D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p\\\\duantotnghiep_test\\\\frontend\\\\src\\\\Pages\\\\Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Breadcrumb from \"../components/Breadcrumb\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"react-use-cart\";\nimport OrderContext from \"../context/orders/orderContext\";\nimport axios from \"axios\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport Loader from \"../components/Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Checkout = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [shippingAddress, setShippingAddress] = useState({\n    name: \"\",\n    phone: \"\",\n    address: \"\",\n    city: \"\",\n    postalCode: \"\",\n    country: \"\"\n  });\n  const [orderItems, setOrderItems] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState(\"\"); // const [paymentResult, setPaymentResult] = useState({})\n\n  const [sdkReady, setSdkReady] = useState(false); // for order context\n\n  const oContext = useContext(OrderContext);\n  const {\n    placeOrder\n  } = oContext;\n\n  const handleChange = e => {\n    setShippingAddress({ ...shippingAddress,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const {\n    isEmpty,\n    // totalItems,\n    // totalUniqueItems,\n    cartTotal,\n    items\n  } = useCart();\n  useEffect(() => {\n    if (isEmpty) {\n      navigate(\"/shop\");\n    }\n\n    const newArr = items.map(_ref => {\n      let {\n        category,\n        createdAt,\n        id,\n        updatedAt,\n        __v,\n        _id,\n        sku,\n        ...keep\n      } = _ref;\n      return { ...keep,\n        product: _id\n      };\n    });\n    setOrderItems(newArr); // eslint-disable-next-line\n  }, []); // for paypal payment method\n\n  useEffect(() => {\n    const addPaypalScript = async () => {\n      const {\n        data: clientId\n      } = await axios.get(\"/api/config/paypal\");\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (paymentMethod === \"paypal\") {\n      // addPaypalScript()\n      if (!window.paypal) {\n        addPaypalScript();\n      } else {\n        setSdkReady(true);\n      }\n    } // addPaypalScript()\n\n  }, [paymentMethod]);\n\n  const handlePlaceOrder = () => {\n    placeOrder(orderItems, shippingAddress, paymentMethod, cartTotal);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n      pageName: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"site-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 mb-5 mb-md-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"h3 mb-3 text-black\",\n              children: \"Chi ti\\u1EBFt thanh to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 p-lg-5 border\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"c_country\",\n                  className: \"text-black\",\n                  children: [\"T\\xEAn \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"name\",\n                  value: shippingAddress.name,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"c_country\",\n                  className: \"text-black\",\n                  children: [\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  className: \"form-control\",\n                  name: \"phone\",\n                  value: shippingAddress.phone,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"c_address\",\n                    className: \"text-black\",\n                    children: [\"\\u0110\\u1ECBa ch\\u1EC9 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control\",\n                    id: \"c_address\",\n                    name: \"address\",\n                    cols: 30,\n                    rows: 5,\n                    value: shippingAddress.address,\n                    onChange: handleChange,\n                    placeholder: \"Street address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"c_country\",\n                  className: \"text-black\",\n                  children: [\"Th\\xE0nh Ph\\u1ED1 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"city\",\n                  value: shippingAddress.city,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"c_country\",\n                  className: \"text-black\",\n                  children: [\"Huy\\u1EC7n/Ph\\u01B0\\u1EDDng \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 34\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"country\",\n                  value: shippingAddress.country,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"c_country\",\n                  className: \"text-black\",\n                  children: [\"M\\xE3 b\\u01B0u \\u0111i\\u1EC7n \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  className: \"form-control\",\n                  name: \"postalCode\",\n                  value: shippingAddress.postalCode,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"h3 mb-3 text-black\",\n                  children: \"\\u0110\\u01A1n h\\xE0ng c\\u1EE7a b\\u1EA1n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 p-lg-5 border\",\n                  children: [/*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table site-block-order-table mb-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"S\\u1EA3n Ph\\u1EA9m\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Gi\\xE1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: [items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [item.name, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                            className: \"mx-2\",\n                            children: \"x\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 197,\n                            columnNumber: 45\n                          }, this), \" \", item.quantity]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 196,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.itemTotal, \".00\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 200,\n                          columnNumber: 29\n                        }, this)]\n                      }, item._id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 27\n                      }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"text-black font-weight-bold\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"T\\u1ED5ng :\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 205,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 204,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"text-black\",\n                          children: [\"$\", cartTotal, \".00\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 207,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 203,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"text-black font-weight-bold\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Order Total\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 211,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 210,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"text-black font-weight-bold\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: [\"$\", cartTotal, \".00\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 214,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 213,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 209,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group my-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"text-black\",\n                      children: [\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 48\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"form-control\",\n                      name: \"paymentMethod\",\n                      onChange: e => setPaymentMethod(e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"L\\u1EF1a ch\\u1ECDn\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 229,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"cod\",\n                        children: \"Thanh to\\xE1n khi nh\\u1EADn h\\xE0ng\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"paypal\",\n                        children: \"Paypal\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 231,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: paymentMethod === \"paypal\" ? !sdkReady ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(PayPalButton, {\n                      currency: \"USD\",\n                      amount: cartTotal // onSuccess={handlePlaceOrder}\n                      ,\n                      onSuccess: async (details, data) => {\n                        // alert(\n                        //   'Transaction completed by ' +\n                        //     details.payer.name.given_name\n                        // )\n                        console.log(details, \"details\");\n                        console.log(data, \"data\"); // setPaymentResult()\n                        // console.log(paymentResult, 'paymentResult')\n\n                        await placeOrder(orderItems, shippingAddress, paymentMethod, cartTotal, {\n                          id: details.id,\n                          status: details.status,\n                          update_time: details.update_time,\n                          email_address: details.payer.email_address\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-primary btn-lg py-3 btn-block\",\n                      onClick: handlePlaceOrder,\n                      children: \"Ti\\u1EBFn h\\xE0nh \\u0111\\u1EB7t h\\xE0ng\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Checkout, \"6zknoLgaCOKB55LdGRzpaxPlzcc=\", false, function () {\n  return [useNavigate, useCart];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/Pages/Checkout.js"],"names":["React","useContext","useEffect","useState","Breadcrumb","useNavigate","useCart","OrderContext","axios","PayPalButton","Loader","Checkout","navigate","shippingAddress","setShippingAddress","name","phone","address","city","postalCode","country","orderItems","setOrderItems","paymentMethod","setPaymentMethod","sdkReady","setSdkReady","oContext","placeOrder","handleChange","e","target","value","isEmpty","cartTotal","items","newArr","map","category","createdAt","id","updatedAt","__v","_id","sku","keep","product","addPaypalScript","data","clientId","get","script","document","createElement","type","src","async","onload","body","appendChild","window","paypal","handlePlaceOrder","item","quantity","itemTotal","details","console","log","status","update_time","email_address","payer"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport Breadcrumb from \"../components/Breadcrumb\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCart } from \"react-use-cart\";\r\nimport OrderContext from \"../context/orders/orderContext\";\r\nimport axios from \"axios\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nconst Checkout = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [shippingAddress, setShippingAddress] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    city: \"\",\r\n    postalCode: \"\",\r\n    country: \"\",\r\n  });\r\n\r\n  const [orderItems, setOrderItems] = useState([]);\r\n\r\n  const [paymentMethod, setPaymentMethod] = useState(\"\");\r\n\r\n  // const [paymentResult, setPaymentResult] = useState({})\r\n\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n\r\n  // for order context\r\n  const oContext = useContext(OrderContext);\r\n  const { placeOrder } = oContext;\r\n\r\n  const handleChange = (e) => {\r\n    setShippingAddress({ ...shippingAddress, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const {\r\n    isEmpty,\r\n    // totalItems,\r\n    // totalUniqueItems,\r\n    cartTotal,\r\n    items,\r\n  } = useCart();\r\n\r\n  useEffect(() => {\r\n    if (isEmpty) {\r\n      navigate(\"/shop\");\r\n    }\r\n    const newArr = items.map(\r\n      ({ category, createdAt, id, updatedAt, __v, _id, sku, ...keep }) => ({\r\n        ...keep,\r\n        product: _id,\r\n      })\r\n    );\r\n    setOrderItems(newArr);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // for paypal payment method\r\n  useEffect(() => {\r\n    const addPaypalScript = async () => {\r\n      const { data: clientId } = await axios.get(\"/api/config/paypal\");\r\n      const script = document.createElement(\"script\");\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n      document.body.appendChild(script);\r\n    };\r\n    if (paymentMethod === \"paypal\") {\r\n      // addPaypalScript()\r\n      if (!window.paypal) {\r\n        addPaypalScript();\r\n      } else {\r\n        setSdkReady(true);\r\n      }\r\n    }\r\n    // addPaypalScript()\r\n  }, [paymentMethod]);\r\n\r\n  const handlePlaceOrder = () => {\r\n    placeOrder(orderItems, shippingAddress, paymentMethod, cartTotal);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb pageName=\"Checkout\" />\r\n      <div className=\"site-section\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-5 mb-md-0\">\r\n              <h2 className=\"h3 mb-3 text-black\">Chi tiết thanh toán</h2>\r\n              <div className=\"p-3 p-lg-5 border\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"c_country\" className=\"text-black\">\r\n                    Tên <span className=\"text-danger\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"name\"\r\n                    value={ shippingAddress.name }\r\n                    onChange={ handleChange }\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"c_country\" className=\"text-black\">\r\n                    Số điện thoại <span className=\"text-danger\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    name=\"phone\"\r\n                    value={ shippingAddress.phone }\r\n                    onChange={ handleChange }\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                  <div className=\"col-md-12\">\r\n                    <label htmlFor=\"c_address\" className=\"text-black\">\r\n                      Địa chỉ <span className=\"text-danger\">*</span>\r\n                    </label>\r\n                    <textarea\r\n                      className=\"form-control\"\r\n                      id=\"c_address\"\r\n                      name=\"address\"\r\n                      cols={ 30 }\r\n                      rows={ 5 }\r\n                      value={ shippingAddress.address }\r\n                      onChange={ handleChange }\r\n                      placeholder=\"Street address\"\r\n                    ></textarea>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"c_country\" className=\"text-black\">\r\n                    Thành Phố <span className=\"text-danger\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"city\"\r\n                    value={ shippingAddress.city }\r\n                    onChange={ handleChange }\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"c_country\" className=\"text-black\">\r\n                    Huyện/Phường <span className=\"text-danger\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"country\"\r\n                    value={ shippingAddress.country }\r\n                    onChange={ handleChange }\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"c_country\" className=\"text-black\">\r\n                    Mã bưu điện <span className=\"text-danger\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    name=\"postalCode\"\r\n                    value={ shippingAddress.postalCode }\r\n                    onChange={ handleChange }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-12\">\r\n                  <h2 className=\"h3 mb-3 text-black\">Đơn hàng của bạn</h2>\r\n                  <div className=\"p-3 p-lg-5 border\">\r\n                    <table className=\"table site-block-order-table mb-5\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Sản Phẩm</th>\r\n                          <th>Giá</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        { items.map((item) => (\r\n                          <tr key={ item._id }>\r\n                            <td>\r\n                              { item.name } <strong className=\"mx-2\">x</strong>{ \" \" }\r\n                              { item.quantity }\r\n                            </td>\r\n                            <td>${ item.itemTotal }.00</td>\r\n                          </tr>\r\n                        )) }\r\n                        <tr>\r\n                          <td className=\"text-black font-weight-bold\">\r\n                            <strong>Tổng :</strong>\r\n                          </td>\r\n                          <td className=\"text-black\">${ cartTotal }.00</td>\r\n                        </tr>\r\n                        <tr>\r\n                          <td className=\"text-black font-weight-bold\">\r\n                            <strong>Order Total</strong>\r\n                          </td>\r\n                          <td className=\"text-black font-weight-bold\">\r\n                            <strong>${ cartTotal }.00</strong>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n\r\n                    <div className=\"form-group my-5\">\r\n                      <label className=\"text-black\">\r\n                        Phương thức thanh toán <span className=\"text-danger\">*</span>\r\n                      </label>\r\n                      <select\r\n                        className=\"form-control\"\r\n                        name=\"paymentMethod\"\r\n                        onChange={ (e) => setPaymentMethod(e.target.value) }\r\n                      >\r\n                        <option value=\"\">Lựa chọn</option>\r\n                        <option value=\"cod\">Thanh toán khi nhận hàng</option>\r\n                        <option value=\"paypal\">Paypal</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      { paymentMethod === \"paypal\" ? (\r\n                        !sdkReady ? (\r\n                          <Loader />\r\n                        ) : (\r\n                          <PayPalButton\r\n                            currency=\"USD\"\r\n                            amount={ cartTotal }\r\n                            // onSuccess={handlePlaceOrder}\r\n                            onSuccess={ async (details, data) => {\r\n                              // alert(\r\n                              //   'Transaction completed by ' +\r\n                              //     details.payer.name.given_name\r\n                              // )\r\n                              console.log(details, \"details\");\r\n                              console.log(data, \"data\");\r\n\r\n                              // setPaymentResult()\r\n                              // console.log(paymentResult, 'paymentResult')\r\n\r\n                              await placeOrder(\r\n                                orderItems,\r\n                                shippingAddress,\r\n                                paymentMethod,\r\n                                cartTotal,\r\n                                {\r\n                                  id: details.id,\r\n                                  status: details.status,\r\n                                  update_time: details.update_time,\r\n                                  email_address: details.payer.email_address,\r\n                                }\r\n                              );\r\n                            } }\r\n                          />\r\n                        )\r\n                      ) : (\r\n                        <button\r\n                          className=\"btn btn-primary btn-lg py-3 btn-block\"\r\n                          onClick={ handlePlaceOrder }\r\n                        >\r\n                          Tiến hành đặt hàng\r\n                        </button>\r\n                      ) }\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* </form> */ }\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}