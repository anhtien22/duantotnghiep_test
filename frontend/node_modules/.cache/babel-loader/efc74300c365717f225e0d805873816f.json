{"ast":null,"code":"var _jsxFileName = \"D:\\\\D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p\\\\duantotnghiep_test\\\\frontend\\\\src\\\\AdminScreens\\\\ProductDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport CategoryContext from '../context/category/categoryContext';\nimport productContext from '../context/product/productContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductDetails = () => {\n  _s();\n\n  // for product context\n  const pContext = useContext(productContext);\n  const {\n    getOneProduct,\n    updateProductDetails,\n    updateProductImage,\n    deleteProduct\n  } = pContext; // for category context\n\n  const cContext = useContext(CategoryContext);\n  const {\n    categories,\n    getCategories\n  } = cContext;\n  const {\n    id\n  } = useParams();\n  const [imageFile, setImageFile] = useState('');\n  const [product, setProduct] = useState({\n    name: '',\n    sku: '',\n    category: '',\n    price: '',\n    description: ''\n  });\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    const fetchProduct = async () => {\n      const fetchedProduct = await getOneProduct(id); // console.log(fetchedProduct)\n\n      setProduct(fetchedProduct);\n      setImage(fetchedProduct.image);\n    };\n\n    fetchProduct();\n    getCategories(); // eslint-disable-next-line\n  }, []);\n\n  const handleChange = e => {\n    setProduct({ ...product,\n      [e.target.name]: e.target.value\n    });\n  }; // console.log(product)\n\n\n  const handleSaveChanges = () => {\n    // console.log(product)\n    const {\n      name,\n      sku,\n      category,\n      price,\n      description\n    } = product;\n    updateProductDetails(id, name, sku, category, price, description);\n  };\n\n  const deleteSaveChanges = () => {\n    // console.log(product)\n    const {\n      name,\n      sku,\n      category,\n      price,\n      description\n    } = product;\n    deleteProduct(id, name, sku, category, price, description);\n  };\n\n  const handleUpdateImage = async () => {\n    const formData = new FormData();\n    formData.append('image', imageFile);\n    console.log('Add product to run');\n    const imagePath = await updateProductImage(id, formData);\n    setImage(imagePath);\n    console.log('update  product image  ran');\n    setImageFile(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"actions\",\n      className: \"py-4 mb-4 bg-light\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/adminDashboard\",\n              className: \"btn btn-secondary btn-block\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-arrow-left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }, this), \" Back To Dashboard\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success btn-block\",\n              onClick: handleSaveChanges,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-check\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), \" Save Changes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger btn-block\",\n              onClick: deleteSaveChanges,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this), \" Delete Product\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"details\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header\",\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Edit Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"name\",\n                    children: \"Product Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"name\",\n                    onChange: handleChange,\n                    value: product.name,\n                    className: \"form-control\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"sku\",\n                    children: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"sku\",\n                    onChange: handleChange,\n                    value: product.sku,\n                    className: \"form-control\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"category\",\n                    children: \"Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-control\",\n                    name: \"category\",\n                    onChange: handleChange,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: product.category._id,\n                      children: product.category.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 23\n                    }, this), categories.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item._id,\n                      children: item.title\n                    }, item._id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"price\",\n                    children: \"Pirce\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"price\",\n                    onChange: handleChange,\n                    value: product.price,\n                    className: \"form-control\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"body\",\n                    children: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control\",\n                    name: \"description\",\n                    onChange: handleChange,\n                    value: product.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-center\",\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: image,\n              alt: \"\",\n              className: \"d-block img-fluid mb-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image\",\n                children: \"Upload Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"custom-file\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  className: \"custom-file-input\",\n                  id: \"image\" // onChange={uploadFileHandler}\n                  ,\n                  name: \"image\",\n                  onChange: e => setImageFile(e.target.files[0]) // value={product.description}\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"image\",\n                  className: \"custom-file-label\",\n                  children: \"Choose File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"form-text text-muted\",\n                children: \"Max Size 3mb\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary btn-block\",\n              disabled: !imageFile,\n              onClick: handleUpdateImage,\n              children: \"Update Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProductDetails, \"ItrJW+rRpuKrCbdCr/vyct1Dr3w=\", false, function () {\n  return [useParams];\n});\n\n_c = ProductDetails;\nexport default ProductDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/AdminScreens/ProductDetails.js"],"names":["React","useContext","useEffect","useState","Link","useParams","CategoryContext","productContext","ProductDetails","pContext","getOneProduct","updateProductDetails","updateProductImage","deleteProduct","cContext","categories","getCategories","id","imageFile","setImageFile","product","setProduct","name","sku","category","price","description","image","setImage","fetchProduct","fetchedProduct","handleChange","e","target","value","handleSaveChanges","deleteSaveChanges","handleUpdateImage","formData","FormData","append","console","log","imagePath","_id","title","map","item","files"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,kBAAhC;AACA,OAAOC,eAAP,MAA4B,qCAA5B;AACA,OAAOC,cAAP,MAA2B,mCAA3B;;;;AAEA,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAC3B;AACA,QAAMC,QAAQ,GAAGR,UAAU,CAACM,cAAD,CAA3B;AACA,QAAM;AAAEG,IAAAA,aAAF;AAAiBC,IAAAA,oBAAjB;AAAuCC,IAAAA,kBAAvC;AAA2DC,IAAAA;AAA3D,MAA6EJ,QAAnF,CAH2B,CAI3B;;AACA,QAAMK,QAAQ,GAAGb,UAAU,CAACK,eAAD,CAA3B;AACA,QAAM;AAAES,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAgCF,QAAtC;AAEA,QAAM;AAAEG,IAAAA;AAAF,MAASZ,SAAS,EAAxB;AAEA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,EAAD,CAA1C;AAEA,QAAM,CAACiB,OAAD,EAAUC,UAAV,IAAwBlB,QAAQ,CAAC;AACrCmB,IAAAA,IAAI,EAAE,EAD+B;AAErCC,IAAAA,GAAG,EAAE,EAFgC;AAGrCC,IAAAA,QAAQ,EAAE,EAH2B;AAIrCC,IAAAA,KAAK,EAAE,EAJ8B;AAKrCC,IAAAA,WAAW,EAAE;AALwB,GAAD,CAAtC;AAQA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBzB,QAAQ,CAAC,IAAD,CAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM2B,YAAY,GAAG,YAAY;AAC/B,YAAMC,cAAc,GAAG,MAAMpB,aAAa,CAACO,EAAD,CAA1C,CAD+B,CAE/B;;AACAI,MAAAA,UAAU,CAACS,cAAD,CAAV;AACAF,MAAAA,QAAQ,CAACE,cAAc,CAACH,KAAhB,CAAR;AACD,KALD;;AAMAE,IAAAA,YAAY;AACZb,IAAAA,aAAa,GARC,CASd;AACD,GAVQ,EAUN,EAVM,CAAT;;AAYA,QAAMe,YAAY,GAAGC,CAAC,IAAI;AACxBX,IAAAA,UAAU,CAAC,EAAE,GAAGD,OAAL;AAAc,OAACY,CAAC,CAACC,MAAF,CAASX,IAAV,GAAiBU,CAAC,CAACC,MAAF,CAASC;AAAxC,KAAD,CAAV;AACD,GAFD,CAlC2B,CAsC3B;;;AACA,QAAMC,iBAAiB,GAAG,MAAM;AAC9B;AACA,UAAM;AAAEb,MAAAA,IAAF;AAAQC,MAAAA,GAAR;AAAaC,MAAAA,QAAb;AAAuBC,MAAAA,KAAvB;AAA8BC,MAAAA;AAA9B,QAA8CN,OAApD;AACAT,IAAAA,oBAAoB,CAACM,EAAD,EAAKK,IAAL,EAAWC,GAAX,EAAgBC,QAAhB,EAA0BC,KAA1B,EAAiCC,WAAjC,CAApB;AACD,GAJD;;AAKA,QAAMU,iBAAiB,GAAG,MAAM;AAC9B;AACA,UAAM;AAAEd,MAAAA,IAAF;AAAQC,MAAAA,GAAR;AAAaC,MAAAA,QAAb;AAAuBC,MAAAA,KAAvB;AAA8BC,MAAAA;AAA9B,QAA8CN,OAApD;AACAP,IAAAA,aAAa,CAACI,EAAD,EAAKK,IAAL,EAAWC,GAAX,EAAgBC,QAAhB,EAA0BC,KAA1B,EAAiCC,WAAjC,CAAb;AACD,GAJD;;AAMA,QAAMW,iBAAiB,GAAG,YAAY;AACpC,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBtB,SAAzB;AAEAuB,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,UAAMC,SAAS,GAAG,MAAM/B,kBAAkB,CAACK,EAAD,EAAKqB,QAAL,CAA1C;AACAV,IAAAA,QAAQ,CAACe,SAAD,CAAR;AAEAF,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AAEAvB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GAXD;;AAeA,sBACE;AAAA,4BAEE;AAAS,MAAA,EAAE,EAAC,SAAZ;AAAsB,MAAA,SAAS,EAAC,oBAAhC;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACE,QAAC,IAAD;AACE,cAAA,EAAE,EAAC,iBADL;AAEE,cAAA,SAAS,EAAC,6BAFZ;AAAA,sCAGE;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAQE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACE;AACE,cAAA,SAAS,EAAC,2BADZ;AAEE,cAAA,OAAO,EAAGgB,iBAFZ;AAAA,sCAGE;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBARF,eAeE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACE;AAAQ,cAAA,SAAS,EAAC,0BAAlB;AACE,cAAA,OAAO,EAAGC,iBADZ;AAAA,sCAEE;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eA6BE;AAAS,MAAA,EAAE,EAAC,SAAZ;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAK,gBAAA,SAAS,EAAC,WAAf;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,0CACE;AAAO,oBAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AACE,oBAAA,IAAI,EAAC,MADP;AAEE,oBAAA,IAAI,EAAC,MAFP;AAGE,oBAAA,QAAQ,EAAGL,YAHb;AAIE,oBAAA,KAAK,EAAGX,OAAO,CAACE,IAJlB;AAKE,oBAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAYE;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,0CACE;AAAO,oBAAA,OAAO,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AACE,oBAAA,IAAI,EAAC,MADP;AAEE,oBAAA,IAAI,EAAC,KAFP;AAGE,oBAAA,QAAQ,EAAGS,YAHb;AAIE,oBAAA,KAAK,EAAGX,OAAO,CAACG,GAJlB;AAKE,oBAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAZF,eAuBE;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,0CACE;AAAO,oBAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AACE,oBAAA,SAAS,EAAC,cADZ;AAEE,oBAAA,IAAI,EAAC,UAFP;AAGE,oBAAA,QAAQ,EAAGQ,YAHb;AAAA,4CAIE;AAAQ,sBAAA,KAAK,EAAGX,OAAO,CAACI,QAAR,CAAiBoB,GAAjC;AAAA,gCACIxB,OAAO,CAACI,QAAR,CAAiBqB;AADrB;AAAA;AAAA;AAAA;AAAA,4BAJF,EAOI9B,UAAU,CAAC+B,GAAX,CAAeC,IAAI,iBACnB;AAAyB,sBAAA,KAAK,EAAGA,IAAI,CAACH,GAAtC;AAAA,gCACIG,IAAI,CAACF;AADT,uBAAcE,IAAI,CAACH,GAAnB;AAAA;AAAA;AAAA;AAAA,4BADA,CAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAvBF,eAwCE;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,0CACE;AAAO,oBAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AACE,oBAAA,IAAI,EAAC,MADP;AAEE,oBAAA,IAAI,EAAC,OAFP;AAGE,oBAAA,QAAQ,EAAGb,YAHb;AAIE,oBAAA,KAAK,EAAGX,OAAO,CAACK,KAJlB;AAKE,oBAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAxCF,eAmDE;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,0CACE;AAAO,oBAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AACE,oBAAA,SAAS,EAAC,cADZ;AAEE,oBAAA,IAAI,EAAC,aAFP;AAGE,oBAAA,QAAQ,EAAGM,YAHb;AAIE,oBAAA,KAAK,EAAGX,OAAO,CAACM;AAJlB;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAnDF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAwFE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAI,cAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,GAAG,EAAGC,KAAX;AAAmB,cAAA,GAAG,EAAC,EAAvB;AAA0B,cAAA,SAAS,EAAC;AAApC;AAAA;AAAA;AAAA;AAAA,oBAFF,eAGE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,wCACE;AACE,kBAAA,IAAI,EAAC,MADP;AAEE,kBAAA,SAAS,EAAC,mBAFZ;AAGE,kBAAA,EAAE,EAAC,OAHL,CAIE;AAJF;AAKE,kBAAA,IAAI,EAAC,OALP;AAME,kBAAA,QAAQ,EAAGK,CAAC,IAAIb,YAAY,CAACa,CAAC,CAACC,MAAF,CAASe,KAAT,CAAe,CAAf,CAAD,CAN9B,CAOA;;AAPA;AAAA;AAAA;AAAA;AAAA,wBADF,eAUE;AAAO,kBAAA,OAAO,EAAC,OAAf;AAAuB,kBAAA,SAAS,EAAC,mBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,eAgBE;AAAO,gBAAA,SAAS,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF,eAqBE;AACE,cAAA,SAAS,EAAC,2BADZ;AAEE,cAAA,QAAQ,EAAG,CAAC9B,SAFd;AAGE,cAAA,OAAO,EAAGmB,iBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBArBF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA7BF;AAAA,kBADF;AA0JD,CA3ND;;GAAM7B,c;UAQWH,S;;;KARXG,c;AA6NN,eAAeA,cAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport CategoryContext from '../context/category/categoryContext'\r\nimport productContext from '../context/product/productContext'\r\n\r\nconst ProductDetails = () => {\r\n  // for product context\r\n  const pContext = useContext(productContext)\r\n  const { getOneProduct, updateProductDetails, updateProductImage, deleteProduct } = pContext\r\n  // for category context\r\n  const cContext = useContext(CategoryContext)\r\n  const { categories, getCategories } = cContext\r\n\r\n  const { id } = useParams()\r\n\r\n  const [imageFile, setImageFile] = useState('')\r\n\r\n  const [product, setProduct] = useState({\r\n    name: '',\r\n    sku: '',\r\n    category: '',\r\n    price: '',\r\n    description: '',\r\n  })\r\n\r\n  const [image, setImage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      const fetchedProduct = await getOneProduct(id)\r\n      // console.log(fetchedProduct)\r\n      setProduct(fetchedProduct)\r\n      setImage(fetchedProduct.image)\r\n    }\r\n    fetchProduct()\r\n    getCategories()\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  const handleChange = e => {\r\n    setProduct({ ...product, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  // console.log(product)\r\n  const handleSaveChanges = () => {\r\n    // console.log(product)\r\n    const { name, sku, category, price, description } = product\r\n    updateProductDetails(id, name, sku, category, price, description)\r\n  }\r\n  const deleteSaveChanges = () => {\r\n    // console.log(product)\r\n    const { name, sku, category, price, description } = product\r\n    deleteProduct(id, name, sku, category, price, description)\r\n  }\r\n\r\n  const handleUpdateImage = async () => {\r\n    const formData = new FormData()\r\n    formData.append('image', imageFile)\r\n\r\n    console.log('Add product to run')\r\n    const imagePath = await updateProductImage(id, formData)\r\n    setImage(imagePath)\r\n\r\n    console.log('update  product image  ran')\r\n\r\n    setImageFile(null)\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      {/* ACTIONS */ }\r\n      <section id=\"actions\" className=\"py-4 mb-4 bg-light\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-4\">\r\n              <Link\r\n                to=\"/adminDashboard\"\r\n                className=\"btn btn-secondary btn-block\">\r\n                <i className=\"fas fa-arrow-left\" /> Back To Dashboard\r\n              </Link>\r\n            </div>\r\n            <div className=\"col-md-4\">\r\n              <button\r\n                className=\"btn btn-success btn-block\"\r\n                onClick={ handleSaveChanges }>\r\n                <i className=\"fas fa-check\" /> Save Changes\r\n              </button>\r\n            </div>\r\n            <div className=\"col-md-4\">\r\n              <button className=\"btn btn-danger btn-block\"\r\n                onClick={ deleteSaveChanges }>\r\n                <i className=\"fas fa-trash\" /> Delete Product\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      {/* DETAILS */ }\r\n      <section id=\"details\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                  <h4>Edit Product</h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"name\">Product Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      onChange={ handleChange }\r\n                      value={ product.name }\r\n                      className=\"form-control\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"sku\">SKU</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"sku\"\r\n                      onChange={ handleChange }\r\n                      value={ product.sku }\r\n                      className=\"form-control\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"category\">Category</label>\r\n                    <select\r\n                      className=\"form-control\"\r\n                      name=\"category\"\r\n                      onChange={ handleChange }>\r\n                      <option value={ product.category._id }>\r\n                        { product.category.title }\r\n                      </option>\r\n                      { categories.map(item => (\r\n                        <option key={ item._id } value={ item._id }>\r\n                          { item.title }\r\n                        </option>\r\n                      )) }\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"price\">Pirce</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"price\"\r\n                      onChange={ handleChange }\r\n                      value={ product.price }\r\n                      className=\"form-control\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"body\">Description</label>\r\n                    <textarea\r\n                      className=\"form-control\"\r\n                      name=\"description\"\r\n                      onChange={ handleChange }\r\n                      value={ product.description }\r\n                    />\r\n                  </div>\r\n\r\n                  {/* <div className=\"form-group\">\r\n                    <label htmlFor=\"image\">Upload Image</label>\r\n                    <div className=\"custom-file\">\r\n                      <input\r\n                        type=\"file\"\r\n                        className=\"custom-file-input\"\r\n                        id=\"image\"\r\n                        // onChange={uploadFileHandler}\r\n                        name=\"image\"\r\n                        onChange={e => setImage(e.target.files[0])}\r\n                        // value={product.description}\r\n                      />\r\n                      <label htmlFor=\"image\" className=\"custom-file-label\">\r\n                        Choose File\r\n                      </label>\r\n                    </div>\r\n                    <small className=\"form-text text-muted\">Max Size 3mb</small>\r\n                  </div> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4\">\r\n              <h3 className=\"text-center\">Image</h3>\r\n              <img src={ image } alt=\"\" className=\"d-block img-fluid mb-3\" />\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"image\">Upload Image</label>\r\n                <div className=\"custom-file\">\r\n                  <input\r\n                    type=\"file\"\r\n                    className=\"custom-file-input\"\r\n                    id=\"image\"\r\n                    // onChange={uploadFileHandler}\r\n                    name=\"image\"\r\n                    onChange={ e => setImageFile(e.target.files[0]) }\r\n                  // value={product.description}\r\n                  />\r\n                  <label htmlFor=\"image\" className=\"custom-file-label\">\r\n                    Choose File\r\n                  </label>\r\n                </div>\r\n                <small className=\"form-text text-muted\">Max Size 3mb</small>\r\n              </div>\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={ !imageFile }\r\n                onClick={ handleUpdateImage }>\r\n                Update Image\r\n              </button>\r\n              {/* <button className=\"btn btn-danger btn-block\">Delete Image</button> */ }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductDetails\r\n"]},"metadata":{},"sourceType":"module"}