{"ast":null,"code":"import _regeneratorRuntime from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import Navbar from\"../AdminComponents/Navbar\";import OrderContext from\"../context/orders/orderContext\";import\"./or.css\";// import SweetPagination from \"sweetpagination\";\nimport{Form,FormControl}from\"react-bootstrap\";import Paginator from'react-hooks-paginator';import swal from\"sweetalert\";import productContext from\"../context/product/productContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Review=function Review(){var pContext=useContext(productContext);var getProducts=pContext.getProducts,products=pContext.products,getAllReviews=pContext.getAllReviews;console.log(\"products\",products);var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),keyword=_useState2[0],setKeyword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),productId=_useState4[0],setProductId=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalResults=_useState6[0],setTotalResults=_useState6[1];var pageLimit=5;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),offset=_useState8[0],setOffset=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),currentData=_useState12[0],setCurrentData=_useState12[1];useEffect(function(){var populateProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setTotalResults;_context.next=3;return getProducts();case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 5:case\"end\":return _context.stop();}}},_callee);}));return function populateProducts(){return _ref.apply(this,arguments);};}();populateProducts();// eslint-disable-next-line\n},[]);var productReviewsSubmitHandler=function productReviewsSubmitHandler(e){e.preventDefault();getAllReviews(productId);};useEffect(function(){if(productId.length===24){getAllReviews(productId);}},[]);useEffect(function(){setCurrentData(products.slice(offset,offset+pageLimit));},[offset,products]);var searchHandler=function searchHandler(e){e.preventDefault();if(keyword.trim()){navigate(\"/reviews?\".concat(keyword));}else{navigate(\"/reviews\");}};var handlerSearchChange=function handlerSearchChange(e){setKeyword(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"header\",{id:\"main-header\",className:\"py-2 bg-info text-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users\"}),\" \\u0110\\u01A1n h\\xE0ng\"]})})})})}),/*#__PURE__*/_jsx(\"section\",{id:\"search\",className:\"py-4 mb-4 bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 ml-auto\",children:/*#__PURE__*/_jsxs(Form,{className:\"d-flex\",onSubmit:searchHandler,children:[/*#__PURE__*/_jsx(FormControl,{type:\"search\",placeholder:\"Search\",className:\"me-2\",\"aria-label\":\"Search\",minLength:3,size:\"sm\",defaultValue:keyword,onChange:handlerSearchChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-secondary mx-3\",children:\"T\\xECm ki\\u1EBFm\"})]})})})})}),/*#__PURE__*/_jsx(\"section\",{id:\"users\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Danh s\\xE1ch b\\xECnh lu\\u1EADn\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"M\\xE3\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEAn s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\u1ED5ng b\\xECnh lu\\u1EADn\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\u1ED5ng \\u0111\\xE1nh gi\\xE1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentData&&currentData.filter(function(value){if(keyword===\"\"){return value;}else if(value._id.toLowerCase().includes(keyword.toLowerCase())){return value;}}).map(function(product,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.numOfReviews}),/*#__PURE__*/_jsx(\"td\",{children:product.ratings}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/reviews/\".concat(product._id),className:\"btn btn-secondary bg-primary text-white\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-double-right\"}),\" Chi ti\\u1EBFt\"]})})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginator,{totalRecords:products.length,pageLimit:pageLimit,pageNeighbours:2,setOffset:setOffset,currentPage:currentPage,setCurrentPage:setCurrentPage,pageContainerClass:\"mb-0 mt-0 d-flex \",pagePrevText:\"\\xAB\",pageNextText:\"\\xBB\"})]})})})})})]});};export default Review;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useNavigate","Navbar","OrderContext","Form","FormControl","Paginator","swal","productContext","Review","pContext","getProducts","products","getAllReviews","console","log","navigate","keyword","setKeyword","productId","setProductId","totalResults","setTotalResults","pageLimit","offset","setOffset","currentPage","setCurrentPage","currentData","setCurrentData","populateProducts","productReviewsSubmitHandler","e","preventDefault","length","slice","searchHandler","trim","handlerSearchChange","target","value","filter","_id","toLowerCase","includes","map","product","index","name","numOfReviews","ratings"],"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/AdminScreens/Review.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"../AdminComponents/Navbar\";\r\nimport OrderContext from \"../context/orders/orderContext\";\r\nimport \"./or.css\";\r\n// import SweetPagination from \"sweetpagination\";\r\nimport { Form, FormControl } from \"react-bootstrap\";\r\nimport Paginator from 'react-hooks-paginator';\r\n\r\nimport swal from \"sweetalert\";\r\nimport productContext from \"../context/product/productContext\";\r\n\r\n\r\nconst Review = () => {\r\n  const pContext = useContext(productContext);\r\n  const { getProducts, products, getAllReviews } = pContext;\r\n  console.log(\"products\", products);\r\n\r\n  const navigate = useNavigate();\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n\r\n  const [productId, setProductId] = useState(\"\");\r\n\r\n  const [totalResults, setTotalResults] = useState(0);\r\n\r\n  const pageLimit = 5;\r\n\r\n  const [offset, setOffset] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [currentData, setCurrentData] = useState([]);\r\n  useEffect(() => {\r\n    const populateProducts = async () => {\r\n      setTotalResults(await getProducts());\r\n    };\r\n    populateProducts();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  const productReviewsSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    getAllReviews(productId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (productId.length === 24) {\r\n      getAllReviews(productId);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrentData(products.slice(offset, offset + pageLimit));\r\n  }, [offset, products]);\r\n\r\n  const searchHandler = (e) => {\r\n    e.preventDefault();\r\n    if (keyword.trim()) {\r\n      navigate(`/reviews?${keyword}`);\r\n    } else {\r\n      navigate(`/reviews`)\r\n    }\r\n  }\r\n\r\n  const handlerSearchChange = (e) => {\r\n    setKeyword(e.target.value);\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      {/* HEADER */ }\r\n      <header id=\"main-header\" className=\"py-2 bg-info text-white\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <h1>\r\n                <i className=\"fas fa-users\" /> Đơn hàng\r\n              </h1>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* SEARCH */ }\r\n      <section id=\"search\" className=\"py-4 mb-4 bg-light\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 ml-auto\">\r\n              <Form className=\"d-flex\" onSubmit={ searchHandler }>\r\n                <FormControl\r\n                  type=\"search\"\r\n                  placeholder=\"Search\"\r\n                  className=\"me-2\"\r\n                  aria-label=\"Search\"\r\n                  minLength={ 3 }\r\n                  size=\"sm\"\r\n                  defaultValue={ keyword } onChange={ handlerSearchChange }\r\n                />\r\n                <button type=\"submit\" className=\"btn btn-secondary mx-3\">\r\n                  Tìm kiếm\r\n                </button>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section id=\"users\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                  <h4>Danh sách bình luận</h4>\r\n                </div>\r\n                <table className=\"table table-striped\">\r\n                  <thead className=\"thead-dark\">\r\n                    <tr>\r\n                      <th>Mã</th>\r\n                      <th>Tên sản phẩm</th>\r\n                      <th>Tổng bình luận</th>\r\n                      <th>Tổng đánh giá</th>\r\n                      <th>Thao tác</th>\r\n                      <th />\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {/* products.reviews && products.reviews.filter((value) => {\r\n                      if (keyword === \"\") {\r\n                        return value;\r\n                      } else if (value._id.toLowerCase().includes(keyword.toLowerCase())) {\r\n                        return value;\r\n                      }\r\n                    }) */}\r\n                    { currentData && currentData.filter((value) => {\r\n                      if (keyword === \"\") {\r\n                        return value;\r\n                      } else if (value._id.toLowerCase().includes(keyword.toLowerCase())) {\r\n                        return value;\r\n                      }\r\n                    }).map((product, index) => (\r\n                      <tr key={ product._id }>\r\n                        <td>{ product._id }</td>\r\n                        <td>{ product.name }</td>\r\n                        <td>{ product.numOfReviews }</td>\r\n                        <td>{ product.ratings }</td>\r\n                        <td>\r\n                          <Link\r\n                            to={ `/reviews/${product._id}` }\r\n                            className=\"btn btn-secondary bg-primary text-white\"\r\n                          >\r\n                            <i className=\"fas fa-angle-double-right\" /> Chi tiết\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    )) }\r\n                  </tbody>\r\n                </table>\r\n                <Paginator\r\n                  totalRecords={ products.length }\r\n                  pageLimit={ pageLimit }\r\n                  pageNeighbours={ 2 }\r\n                  setOffset={ setOffset }\r\n                  currentPage={ currentPage }\r\n                  setCurrentPage={ setCurrentPage }\r\n                  pageContainerClass=\"mb-0 mt-0 d-flex \"\r\n                  pagePrevText=\"«\"\r\n                  pageNextText=\"»\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Review;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}