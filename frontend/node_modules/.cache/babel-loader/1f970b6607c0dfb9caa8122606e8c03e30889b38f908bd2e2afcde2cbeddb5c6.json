{"ast":null,"code":"import _regeneratorRuntime from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/D\\u1EF1 \\xC1n T\\u1ED1t Nghi\\u1EC7p/duantotnghiep_test/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import UserContext from'./UserContext';import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';// Function for cleaning null, undefined and empty strings values in objects\nimport{jsx as _jsx}from\"react/jsx-runtime\";function clean(obj){for(var propName in obj){if(obj[propName]===null||obj[propName]===undefined||obj[propName]===''){delete obj[propName];}}return obj;}var UserState=function UserState(props){//fort navigate\nvar navigate=useNavigate();// axios config\nvar userToken=JSON.parse(localStorage.getItem('userToken'));var headers={Authorization:\"Bearer \".concat(userToken||'')};var userInfo=JSON.parse(localStorage.getItem('userInfo'));var _useState=useState(userInfo||null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userError=_useState4[0],setUserError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),userLoading=_useState6[0],setUserLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),userMessage=_useState8[0],setUserMessage=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),allUsers=_useState10[0],setAllUsers=_useState10[1];//   for disabling the alert messages after 3 seconds\nuseEffect(function(){setTimeout(function(){setUserMessage(null);setUserError(null);},3000);},[userMessage,userError]);// Error handler funtion\nvar errorHandler=function errorHandler(err,info){if(info===undefined||null){info='';}if(err.response){setUserError({variant:'danger',message:\"\".concat(info,\" \").concat(err.response.data.error)});}else if(err.request){setUserError({variant:'danger',message:\"\".concat(info,\" No response from server\")});}else{setUserError({variant:'danger',message:err.message});}setUserLoading(false);};// -----------------------------------------------------------------\n// Login user\n// -----------------------------------------------------------------\nvar login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setUserLoading(true);_context.next=4;return axios.post(\"api/users/login\",{email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem('userInfo',JSON.stringify(data.user));localStorage.setItem('userToken',JSON.stringify(data.token));setUser(data.user);setUserError(null);setUserLoading(false);setUserMessage({variant:'success',message:'Đăng nhập thành công'});navigate('/');//   history.push('/')\n_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);errorHandler(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function login(_x,_x2){return _ref.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Signup a new user\n// -----------------------------------------------------------------\nvar signup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name,email,password){var body,_yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;body=clean({name:name,email:email,password:password});setUserLoading(true);_context2.next=5;return axios.post(\"api/users/register\",body);case 5:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;localStorage.setItem('userInfo',JSON.stringify(data.user));localStorage.setItem('userToken',JSON.stringify(data.token));setUser(data.user);setUserError(null);setUserLoading(false);setUserMessage({variant:'success',message:'Đăng ký thành công'});navigate('/');_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);errorHandler(_context2.t0);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[0,16]]);}));return function signup(_x3,_x4,_x5){return _ref2.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Logout a user\n// -----------------------------------------------------------------\nvar logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{setUserLoading(true);// await axios.post(`api/users/logout`, null, {\n//   headers,\n// })\nlocalStorage.removeItem('userInfo');localStorage.removeItem('userToken');localStorage.removeItem('react-use-cart');setUser(null);setUserError(null);setUserLoading(false);setUserMessage({variant:'dark',message:'Bạn đã đăng xuất!'});navigate('/login');}catch(err){errorHandler(err);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function logout(){return _ref3.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Read user profile\n// -----------------------------------------------------------------\nvar readProfile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;setUserLoading(true);_context4.next=4;return axios.get('api/users/profile',{headers:headers});case 4:_yield$axios$get=_context4.sent;data=_yield$axios$get.data;setUserError(null);setUserLoading(false);return _context4.abrupt(\"return\",data);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);errorHandler(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function readProfile(){return _ref4.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Edit Profile\n// -----------------------------------------------------------------\nvar editProfile=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(name,email){var body,_yield$axios$patch,data;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;setUserLoading(true);body=clean({name:name,email:email});_context5.next=5;return axios.patch('api/users/profile',body,{headers:headers});case 5:_yield$axios$patch=_context5.sent;data=_yield$axios$patch.data;setUser(data.user);localStorage.setItem('userInfo',JSON.stringify(data.user));setUserError(null);setUserLoading(false);setUserMessage({variant:'success',message:'Hồ sơ của bạn đã được cập nhật thành công'});return _context5.abrupt(\"return\",data);case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](0);errorHandler(_context5.t0,'Không thể cập nhật hồ sơ của bạn!');case 18:case\"end\":return _context5.stop();}}},_callee5,null,[[0,15]]);}));return function editProfile(_x6,_x7){return _ref5.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Get all users\n// -----------------------------------------------------------------\nvar getAllUsers=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;setUserLoading(true);_context6.next=4;return axios.get('/api/users/getAll',{headers:headers});case 4:_yield$axios$get2=_context6.sent;data=_yield$axios$get2.data;setAllUsers(data.users);setUserError(null);setUserLoading(false);_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);errorHandler(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[0,11]]);}));return function getAllUsers(){return _ref6.apply(this,arguments);};}();// -----------------------------------------------------------------\n// Delete Profile\n// -----------------------------------------------------------------\nvar deleteProfile=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;setUserLoading(false);_context7.next=4;return axios.delete('api/users/me',{headers:headers});case 4:localStorage.removeItem('userInfo');setUser(null);setUserError(null);setUserLoading(false);setUserMessage({variant:'danger',message:'Đã xóa hồ sơ'});navigate('/login');_context7.next=15;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](0);errorHandler(_context7.t0);case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,12]]);}));return function deleteProfile(){return _ref7.apply(this,arguments);};}();var getOneUserAdmin=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(id){var _userToken,_headers,_yield$axios$get3,data;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;setUserLoading(true);_userToken=JSON.parse(localStorage.getItem('userToken'));_headers={Authorization:\"Bearer \".concat(_userToken&&_userToken)};_context8.next=6;return axios.get(\"/api/users/admin/user/\".concat(id),{headers:_headers});case 6:_yield$axios$get3=_context8.sent;data=_yield$axios$get3.data;setUserLoading(false);setUserError(null);return _context8.abrupt(\"return\",data.user);case 13:_context8.prev=13;_context8.t0=_context8[\"catch\"](0);errorHandler(_context8.t0);case 16:case\"end\":return _context8.stop();}}},_callee8,null,[[0,13]]);}));return function getOneUserAdmin(_x8){return _ref8.apply(this,arguments);};}();var forgotPassword=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(payload){var config,_yield$axios$post3,data;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;setUserLoading(true);config={headers:{\"Content-Type\":\"application/json\"}};_context9.next=5;return axios.post(\"/api/users/password/forgot\",{email:payload.email},config);case 5:_yield$axios$post3=_context9.sent;data=_yield$axios$post3.data;setUserLoading(false);setUserError(null);setUserMessage({variant:'success',message:\"\".concat(data.message)});return _context9.abrupt(\"return\",data.user);case 13:_context9.prev=13;_context9.t0=_context9[\"catch\"](0);errorHandler({err:_context9.t0});case 16:case\"end\":return _context9.stop();}}},_callee9,null,[[0,13]]);}));return function forgotPassword(_x9){return _ref9.apply(this,arguments);};}();var resetPassword=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(token,payload){var config,_yield$axios$put,data;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;setUserLoading(true);config={headers:{\"Content-Type\":\"application/json\"}};_context10.next=5;return axios.put(\"/api/users/password/reset/\".concat(token),{password:payload.password,confirmPassword:payload.confirmPassword},config);case 5:_yield$axios$put=_context10.sent;data=_yield$axios$put.data;setUserLoading(false);setUserError(null);setUserMessage({variant:'success',message:'Bạn đã đổi mật khẩu thành công!'});return _context10.abrupt(\"return\",data.user);case 13:_context10.prev=13;_context10.t0=_context10[\"catch\"](0);// if (payload.password !== payload.confirmPassword) {\nerrorHandler(_context10.t0);// }\ncase 16:case\"end\":return _context10.stop();}}},_callee10,null,[[0,13]]);}));return function resetPassword(_x10,_x11){return _ref10.apply(this,arguments);};}();var updatePassword=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(payload){var config,_yield$axios$put2,data;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;// setUserLoading(true)\nconfig={headers:{\"Content-Type\":\"application/json\"}};_context11.next=4;return axios.put(\"/api/users/profile/updatepassword\",{oldPassword:payload.oldPassword,newPassword:payload.newPassword,confirmPassword:payload.confirmPassword},config);case 4:_yield$axios$put2=_context11.sent;data=_yield$axios$put2.data;_context11.next=11;break;case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](0);errorHandler(_context11.t0);case 11:case\"end\":return _context11.stop();}}},_callee11,null,[[0,8]]);}));return function updatePassword(_x12){return _ref11.apply(this,arguments);};}();return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user:user,userError:userError,userLoading:userLoading,userMessage:userMessage,allUsers:allUsers,login:login,signup:signup,logout:logout,readProfile:readProfile,editProfile:editProfile,getAllUsers:getAllUsers,deleteProfile:deleteProfile,getOneUserAdmin:getOneUserAdmin,forgotPassword:forgotPassword,resetPassword:resetPassword,updatePassword:updatePassword},children:props.children});};// -----------------------------------------\n//  Get One user admin\n//   ---------------------------------------\nexport default UserState;","map":{"version":3,"names":["UserContext","React","useState","useEffect","axios","useNavigate","clean","obj","propName","undefined","UserState","props","navigate","userToken","JSON","parse","localStorage","getItem","headers","Authorization","userInfo","user","setUser","userError","setUserError","userLoading","setUserLoading","userMessage","setUserMessage","allUsers","setAllUsers","setTimeout","errorHandler","err","info","response","variant","message","data","error","request","login","email","password","post","setItem","stringify","token","signup","name","body","logout","removeItem","readProfile","get","editProfile","patch","getAllUsers","users","deleteProfile","delete","getOneUserAdmin","id","forgotPassword","payload","config","resetPassword","put","confirmPassword","updatePassword","oldPassword","newPassword","children"],"sources":["D:/Dự Án Tốt Nghiệp/duantotnghiep_test/frontend/src/context/user/UserState.js"],"sourcesContent":["import UserContext from './UserContext'\r\nimport React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\n// Function for cleaning null, undefined and empty strings values in objects\r\nfunction clean(obj) {\r\n  for (var propName in obj) {\r\n    if (\r\n      obj[propName] === null ||\r\n      obj[propName] === undefined ||\r\n      obj[propName] === ''\r\n    ) {\r\n      delete obj[propName]\r\n    }\r\n  }\r\n  return obj\r\n}\r\n\r\nconst UserState = props => {\r\n  //fort navigate\r\n  const navigate = useNavigate()\r\n\r\n  // axios config\r\n  const userToken = JSON.parse(localStorage.getItem('userToken'))\r\n  const headers = {\r\n    Authorization: `Bearer ${userToken || ''}`,\r\n  }\r\n\r\n  const userInfo = JSON.parse(localStorage.getItem('userInfo'))\r\n\r\n  const [user, setUser] = useState(userInfo || null)\r\n  const [userError, setUserError] = useState(null)\r\n  const [userLoading, setUserLoading] = useState(false)\r\n  const [userMessage, setUserMessage] = useState(null)\r\n  const [allUsers, setAllUsers] = useState([])\r\n\r\n  //   for disabling the alert messages after 3 seconds\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setUserMessage(null)\r\n      setUserError(null)\r\n    }, 3000)\r\n  }, [userMessage, userError])\r\n\r\n  // Error handler funtion\r\n  const errorHandler = (err, info) => {\r\n    if (info === undefined || null) {\r\n      info = ''\r\n    }\r\n    if (err.response) {\r\n      setUserError({\r\n        variant: 'danger',\r\n        message: `${info} ${err.response.data.error}`,\r\n      })\r\n    } else if (err.request) {\r\n      setUserError({\r\n        variant: 'danger',\r\n        message: `${info} No response from server`,\r\n      })\r\n    } else {\r\n      setUserError({ variant: 'danger', message: err.message })\r\n    }\r\n    setUserLoading(false)\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Login user\r\n  // -----------------------------------------------------------------\r\n  const login = async (email, password) => {\r\n    try {\r\n      setUserLoading(true)\r\n      const { data } = await axios.post(`api/users/login`, {\r\n        email,\r\n        password,\r\n      })\r\n      localStorage.setItem('userInfo', JSON.stringify(data.user))\r\n      localStorage.setItem('userToken', JSON.stringify(data.token))\r\n      setUser(data.user)\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      setUserMessage({ variant: 'success', message: 'Đăng nhập thành công' })\r\n      navigate('/')\r\n      //   history.push('/')\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Signup a new user\r\n  // -----------------------------------------------------------------\r\n  const signup = async (name, email, password) => {\r\n    try {\r\n      const body = clean({ name, email, password })\r\n      setUserLoading(true)\r\n      const { data } = await axios.post(`api/users/register`, body)\r\n      localStorage.setItem('userInfo', JSON.stringify(data.user))\r\n      localStorage.setItem('userToken', JSON.stringify(data.token))\r\n      setUser(data.user)\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      setUserMessage({ variant: 'success', message: 'Đăng ký thành công' })\r\n      navigate('/')\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Logout a user\r\n  // -----------------------------------------------------------------\r\n  const logout = async () => {\r\n    try {\r\n      setUserLoading(true)\r\n      // await axios.post(`api/users/logout`, null, {\r\n      //   headers,\r\n      // })\r\n      localStorage.removeItem('userInfo')\r\n      localStorage.removeItem('userToken')\r\n      localStorage.removeItem('react-use-cart')\r\n      setUser(null)\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      setUserMessage({ variant: 'dark', message: 'Bạn đã đăng xuất!' })\r\n      navigate('/login')\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Read user profile\r\n  // -----------------------------------------------------------------\r\n  const readProfile = async () => {\r\n    try {\r\n      setUserLoading(true)\r\n      const { data } = await axios.get('api/users/profile', { headers })\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      return data\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Edit Profile\r\n  // -----------------------------------------------------------------\r\n  const editProfile = async (name, email) => {\r\n    try {\r\n      setUserLoading(true)\r\n      const body = clean({ name, email })\r\n      const { data } = await axios.patch('api/users/profile', body, { headers })\r\n      setUser(data.user)\r\n      localStorage.setItem('userInfo', JSON.stringify(data.user))\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      setUserMessage({\r\n        variant: 'success',\r\n        message: 'Hồ sơ của bạn đã được cập nhật thành công',\r\n      })\r\n      return data\r\n    } catch (err) {\r\n      errorHandler(err, 'Không thể cập nhật hồ sơ của bạn!')\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Get all users\r\n  // -----------------------------------------------------------------\r\n  const getAllUsers = async () => {\r\n    try {\r\n      setUserLoading(true)\r\n      const { data } = await axios.get('/api/users/getAll', { headers })\r\n      setAllUsers(data.users)\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n\r\n  // -----------------------------------------------------------------\r\n  // Delete Profile\r\n  // -----------------------------------------------------------------\r\n  const deleteProfile = async () => {\r\n    try {\r\n      setUserLoading(false)\r\n      await axios.delete('api/users/me', { headers })\r\n      localStorage.removeItem('userInfo')\r\n      setUser(null)\r\n      setUserError(null)\r\n      setUserLoading(false)\r\n      setUserMessage({ variant: 'danger', message: 'Đã xóa hồ sơ' })\r\n      navigate('/login')\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n  const getOneUserAdmin = async id => {\r\n    try {\r\n      setUserLoading(true)\r\n      const userToken = JSON.parse(localStorage.getItem('userToken'))\r\n      const headers = {\r\n        Authorization: `Bearer ${userToken && userToken}`,\r\n      }\r\n      const { data } = await axios.get(`/api/users/admin/user/${id}`, {\r\n        headers,\r\n      })\r\n      setUserLoading(false)\r\n      setUserError(null)\r\n      return data.user\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  }\r\n  const forgotPassword = async (payload) => {\r\n    try {\r\n      setUserLoading(true)\r\n      const config = { headers: { \"Content-Type\": \"application/json\" } };\r\n\r\n      const { data } = await axios.post(\"/api/users/password/forgot\", {\r\n        email: payload.email\r\n      },\r\n        config\r\n      );\r\n      setUserLoading(false)\r\n      setUserError(null)\r\n      setUserMessage({\r\n        variant: 'success',\r\n        message: `${data.message}`,\r\n      })\r\n      return data.user;\r\n    } catch (err) {\r\n      errorHandler({ err })\r\n\r\n    }\r\n  };\r\n\r\n  const resetPassword = async (token, payload) => {\r\n    try {\r\n      setUserLoading(true)\r\n\r\n      const config = { headers: { \"Content-Type\": \"application/json\" } };\r\n\r\n      const { data } = await axios.put(\r\n        `/api/users/password/reset/${token}`,\r\n        {\r\n          password: payload.password,\r\n          confirmPassword: payload.confirmPassword,\r\n        },\r\n        config\r\n      );\r\n\r\n      setUserLoading(false)\r\n      setUserError(null)\r\n      setUserMessage({\r\n        variant: 'success',\r\n        message: 'Bạn đã đổi mật khẩu thành công!',\r\n      })\r\n      return data.user;\r\n\r\n    } catch (error) {\r\n      // if (payload.password !== payload.confirmPassword) {\r\n      errorHandler(error)\r\n      // }\r\n\r\n    }\r\n  };\r\n\r\n  const updatePassword = async (payload) => {\r\n    try {\r\n      // setUserLoading(true)\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      };\r\n\r\n      const { data } = await axios.put(\r\n        `/api/users/profile/updatepassword`,\r\n        {\r\n          oldPassword: payload.oldPassword,\r\n          newPassword: payload.newPassword,\r\n          confirmPassword: payload.confirmPassword,\r\n        },\r\n        config\r\n      );\r\n      // const res = await fetch(`/api/users/profile/updatepassword`, {\r\n      //   method: \"PATCH\",\r\n      //   headers,\r\n      //   body: JSON.stringify({\r\n      //     oldPassword: payload.oldPassword,\r\n      //     newPassword: payload.newPassword,\r\n      //     confirmPassword: payload.confirmPassword,\r\n      //   }),\r\n      // });\r\n      // setUserLoading(false)\r\n      // setUserError(null)\r\n      // return data.user;\r\n    } catch (err) {\r\n      errorHandler(err)\r\n    }\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={ {\r\n        user,\r\n        userError,\r\n        userLoading,\r\n        userMessage,\r\n        allUsers,\r\n        login,\r\n        signup,\r\n        logout,\r\n        readProfile,\r\n        editProfile,\r\n        getAllUsers,\r\n        deleteProfile,\r\n        getOneUserAdmin,\r\n        forgotPassword,\r\n        resetPassword,\r\n        updatePassword\r\n      } }>\r\n      { props.children }\r\n    </UserContext.Provider>\r\n  )\r\n}\r\n// -----------------------------------------\r\n//  Get One user admin\r\n//   ---------------------------------------\r\n\r\n\r\nexport default UserState\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}